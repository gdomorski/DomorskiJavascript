<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>Chatbuilder</title>
    <script src="http://chatbuilder.hackreactor.com/ChatBuilder.js"></script>
  </head>
  <body>


    <h2>Borken Chat</h2>

    <input class="draft" type="text"/> <button class="send">Send</button>

    <ul class="messages">
      


    </ul>

   <script>  //moved the script to the bottom of the page so it has time to load all the HTML
      /*
       *  Nice, you found the HTML source code for ChatBuilder! This document kicks everything off when you load it
       *  in your browser, and is a starting point for the whole app. It's pretty incomplete though--you should
       *  make your own version of it that works better!
       *
       *  You can't edit the code here until it's in a file on your hard drive, so copy this whole page of source
       *  code and paste it into a plain text editor like Sublime Text 2 (http://www.sublimetext.com/). Save it as
       *  a `.html` file, and open that file with Google Chrome. You can now edit it however you like, and refresh
       *  the page to see your modifications take effect on how the application runs.
       *
       *  Fair warning: one or more of the steps ahead could require a good amount of research to understand all
       *  the terms and technologies mentioned. Googling words you haven't heard before is a great idea. Just be
       *  careful not to spend too long in 'research mode' without making any forward progress on your real goal of
       *  completing the app!
       *
       *  When you've got this code saved as a local file, uncomment the line of JavaScript code below and open
       *  the new file in Google Chrome. Your next instructions will be waiting for you in the JavaScript console.
       *  If you already know the Chrome JS development tools pretty well, feel free to skip this opening tutorial
       *  by calling the `.start()` function on `Chat.guide` instead of `.intro()`
       *
       *  NOTE: Please do not publish or share any of the code associated with this challenge. We've worked really
       *  hard to build this material and publishing solutions diminishes its effectiveness.
       */
       delete Chat.display;
       delete Chat.fetch;
       delete Chat.send;

      Chat.display = function (str){
        
        //add that li to the messages list
        $('.messages').append('<li>' + str + '</li>') //use dot to reference classes, # references an ID nothing references the tag name, append adds something to the front while prepend adds something the the end

      };

      Chat.fetch = function (fn){  //this function goes to the server returns a array of messages, when it came back from the server, run a callback function


      $.get( "https://api.parse.com/1/classes/chats?order=createdAt", function( data ) {  //find the location from the network panel
        console.log(data);
         // alert( "Load was performed." );
          });

      }


      Chat.guide.start();

      var getMessages = Chat.fetch(function(msgs){ ////fetch gets the messages
        msgs.forEach(function(msg){   //forEach method shows each message on a different line
          Chat.display(msg)  //display gets the messages on the screen
        })
      });


    window.setTimeout(getMessages, 3000);  //get messages every three seconds.

    // Hook up the button and the input with jQuery
    $('.send').click(function() {  //send references the button class
      Chat.send($('.draft').val()); //gets the text inside the draft element  
    });



    </script>

  </body>
</html>